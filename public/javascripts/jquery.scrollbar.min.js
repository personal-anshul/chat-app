/*! Licensed under the MIT license */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(e,o){function l(){return p.update(),u(),p}function s(){b.css(T,p.thumbPosition),v.css(T,-p.contentPosition),S.css(g,p.trackSize),A.css(g,p.trackSize),b.css(g,p.thumbSize)}function u(){w&&(f[0].ontouchstart=function(t){1===t.touches.length&&(t.stopPropagation(),a(t.touches[0]))}),b.bind("mousedown",function(t){t.stopPropagation(),a(t)}),A.bind("mousedown",function(t){a(t,!0)}),t(window).resize(function(){p.update("relative")}),p.options.wheel&&window.addEventListener?e[0].addEventListener(z,h,!1):p.options.wheel&&(e[0].onmousewheel=h)}function r(){return p.contentPosition>0}function c(){return p.contentPosition<=p.contentSize-p.viewportSize-5}function a(e,n){p.hasContentToSroll&&(t("body").addClass("noSelect"),k=n?b.offset()[T]:_?e.pageX:e.pageY,w&&(document.ontouchmove=function(t){(p.options.touchLock||r()&&c())&&t.preventDefault(),t.touches[0][i+"Touch"]=1,d(t.touches[0])},document.ontouchend=m),t(document).bind("mousemove",d),t(document).bind("mouseup",m),b.bind("mouseup",m),A.bind("mouseup",m),d(e))}function h(i){if(p.hasContentToSroll){var n=i||window.event,o=-(n.deltaY||n.detail||-1/3*n.wheelDelta)/40,l=1===n.deltaMode?p.options.wheelSpeed:1;p.contentPosition-=o*l*p.options.wheelSpeed,p.contentPosition=Math.min(p.contentSize-p.viewportSize,Math.max(0,p.contentPosition)),p.thumbPosition=p.contentPosition/p.trackRatio,e.trigger("move"),b.css(T,p.thumbPosition),v.css(T,-p.contentPosition),(p.options.wheelLock||r()&&c())&&(n=t.event.fix(n),n.preventDefault())}i.stopPropagation()}function d(t){if(p.hasContentToSroll){var n=_?t.pageX:t.pageY,o=t[i+"Touch"]?k-n:n-k,l=Math.min(p.trackSize-p.thumbSize,Math.max(0,p.thumbPosition+o));p.contentPosition=l*p.trackRatio,e.trigger("move"),b.css(T,l),v.css(T,-p.contentPosition)}}function m(){p.thumbPosition=parseInt(b.css(T),10)||0,t("body").removeClass("noSelect"),t(document).unbind("mousemove",d),t(document).unbind("mouseup",m),b.unbind("mouseup",m),A.unbind("mouseup",m),document.ontouchmove=document.ontouchend=null}this.options=t.extend({},n,o),this._defaults=n,this._name=i;var p=this,f=e.find(".viewport"),v=e.find(".overview"),S=e.find(".scrollbar"),A=S.find(".track"),b=S.find(".thumb"),w="ontouchstart"in document.documentElement,z="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",_="x"===this.options.axis,g=_?"width":"height",T=_?"left":"top",k=0;return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.hasContentToSroll=!1,this.update=function(t){var e=g.charAt(0).toUpperCase()+g.slice(1).toLowerCase();switch(this.viewportSize=f[0]["offset"+e],this.contentSize=v[0]["scroll"+e],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize),this.hasContentToSroll=this.contentRatio<1,S.toggleClass("disable",!this.hasContentToSroll),t){case"bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(t,10)||0}return this.thumbPosition=this.contentPosition/this.trackRatio,s(),p},l()}var i="tinyscrollbar",n={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,thumbSize:!1,thumbSizeMin:20};t.fn[i]=function(n){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new e(t(this),n))})}}),function(t){t.titleAlert=function(e,i){if(t.titleAlert._running&&t.titleAlert.stop(),t.titleAlert._settings=i=t.extend({},t.titleAlert.defaults,i),!i.requireBlur||!t.titleAlert.hasFocus){i.originalTitleInterval=i.originalTitleInterval||i.interval,t.titleAlert._running=!0,t.titleAlert._initialText=document.title,document.title=e;var n=!0,o=function(){t.titleAlert._running&&(n=!n,document.title=n?e:t.titleAlert._initialText,t.titleAlert._intervalToken=setTimeout(o,n?i.interval:i.originalTitleInterval))};t.titleAlert._intervalToken=setTimeout(o,i.interval),i.stopOnMouseMove&&t(document).mousemove(function(e){t(this).unbind(e),t.titleAlert.stop()}),i.duration>0&&(t.titleAlert._timeoutToken=setTimeout(function(){t.titleAlert.stop()},i.duration))}},t.titleAlert.defaults={interval:500,originalTitleInterval:null,duration:0,stopOnFocus:!0,requireBlur:!1,stopOnMouseMove:!1},t.titleAlert.stop=function(){t.titleAlert._running&&(clearTimeout(t.titleAlert._intervalToken),clearTimeout(t.titleAlert._timeoutToken),document.title=t.titleAlert._initialText,t.titleAlert._timeoutToken=null,t.titleAlert._intervalToken=null,t.titleAlert._initialText=null,t.titleAlert._running=!1,t.titleAlert._settings=null)},t.titleAlert.hasFocus=!0,t.titleAlert._running=!1,t.titleAlert._intervalToken=null,t.titleAlert._timeoutToken=null,t.titleAlert._initialText=null,t.titleAlert._settings=null,t.titleAlert._focus=function(){if(t.titleAlert.hasFocus=!0,t.titleAlert._running&&t.titleAlert._settings.stopOnFocus){var e=t.titleAlert._initialText;t.titleAlert.stop(),setTimeout(function(){t.titleAlert._running||(document.title=".",document.title=e)},1e3)}},t.titleAlert._blur=function(){t.titleAlert.hasFocus=!1},t(window).bind("focus",t.titleAlert._focus),t(window).bind("blur",t.titleAlert._blur)}(jQuery);
